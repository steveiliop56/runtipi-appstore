{
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "step-ca",
      "image": "smallstep/step-ca:0.29.0",
      "internalPort": "9000",
      "isMain": true,
      "environment": [
        {
          "key": "DOCKER_STEPCA_INIT_NAME",
          "value": "${STEPCA_CA_NAME:-Smallstep}"
        },
        {
          "key": "DOCKER_STEPCA_INIT_DNS_NAMES",
          "value": "${STEPCA_DNS_NAMES}"
        },
        {
          "key": "DOCKER_STEPCA_INIT_REMOTE_MANAGEMENT",
          "value": "true"
        },
        {
          "key": "DOCKER_STEPCA_INIT_SSH",
          "value": "true"
        },
        {
          "key": "DOCKER_STEPCA_INIT_ACME",
          "value": "true"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/home/step"
        }
      ],
      "healthCheck": {
        "test": "curl -k https://127.0.0.1:9000/health || exit 1"
      }
    }
  ],
  "schemaVersion": 2
}
