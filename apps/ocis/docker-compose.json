{
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "ocis",
      "image": "owncloud/ocis:7.3.2",
      "isMain": true,
      "internalPort": 9200,
      "entrypoint": ["/bin/sh"],
      "command": ["-c", "ocis init || true; exec ocis server"],
      "environment": [
        {
          "key": "OCIS_INSECURE",
          "value": "true"
        },
        {
          "key": "PROXY_TLS",
          "value": "false"
        },
        {
          "key": "OCIS_URL",
          "value": "${OCIS_URL}"
        },
        {
          "key": "OCIS_LOG_LEVEL",
          "value": "info"
        },
        {
          "key": "IDM_ADMIN_PASSWORD",
          "value": "${OCIS_IDM_ADMIN_PASSWORD}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/config",
          "containerPath": "/etc/ocis"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/ocis",
          "containerPath": "/var/lib/ocis"
        }
      ]
    }
  ],
  "schemaVersion": 2
}
